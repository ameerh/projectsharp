<table class="table table-striped">
  <thead>
    <tr>
      <th>Date/Time</th>
      <th>Type</th>
      <th>Teams</th>
      <th>Odds</th>
<!--       <th>Spreads</th> -->
      <th>Total</th>
      <th>&nbsp;</th>
      <th>Perdictions</th>
    </tr>
  </thead>

  <tbody>
    <%j = 0%>
    <% @events.each do |event| %>
        <%i = 0%>
        <tr>
        <%(event.participants.count/2).times do%>
        <% if event.participants[(i*2)].participant_name != "Away Runs" %>
          <td>
            <%= (event.event_datetime - 1.hours).strftime("%d, %b @ %I:%M%p") %>
          </td>
          <%if event.league.present?%>
            <td><%= event.league %></td>
          <%else%>
            <td></td>
          <%end%>
          <%if event.participants[(i*2)].present? && event.participants[(i*2)+1].present?%>
            <td>
              <%= event.participants[(i*2)].participant_name %><br/>
              <%= event.participants[(i*2)+1].participant_name %>
            </td>
          <%else%>
            <td></td>
          <%end%>
          <%if event.periods[0].present?%>
            <td>
              <%= event.periods[0].moneyline_visiting.to_i > 0 ? "+#{event.periods[0].moneyline_visiting}" : "" %><br/>
              <%= event.periods[0].moneyline_home %>
            </td>
          <%else%>
            <td></td>
          <%end%>
          <%if event.periods[0].present?%>
            <td><span>Over</span><%=event.periods[0].tootal_point.to_s %> <br/><span>Under</span><%= event.periods[0].tootal_point.to_s %></td>
          <%else%>
            <td></td>
          <%end%>
          <td id="count">
            <div id="time_<%="#{j}"%>" data-date="<%= "#{(event.event_datetime)}" %>" style="width: 400px; height: 90px; padding: 0px; box-sizing: border-box;">
            </div>
          </td>
          <% date = (event.event_datetime).strftime("%d %b, %Y") %>
          <td><a href="events/previews?team_a=<%= event.participants[(i*2)].participant_name %>&pitcher_a=<%= event.participants[(i*2)].pitcher %>&team_b=<%= event.participants[(i*2)+1].participant_name %>&pitcher_b=<%= event.participants[(i*2)+1].pitcher %>&date=<%= date %>&event=<%= event.id %>">Perdictions</a></td>
            <% i = i+1 %>
            <% j = j+1 %>
          </tr>
          <%end%>
        <%end%>
    <% end %>
  </tbody>
</table>
<style>
  th {
    text-align: center!important;
  }
  td {
    text-align: center!important;
  }
  #count
  {
    text-align: right !important;
  }
  #count div
  {
  }
</style>
<script type="text/javascript">
var i = 0;
$("td").each(function() {
    var id = $(this).attr('id');
    if (id == "count")
      i++;
    // compare id to what you want
});

for (var j=0; j<i; j++){
  $("#time_"+j).TimeCircles({"time": {
        "Days": {
            "text": "Days",
            "color": "#FFCC66",
            "show": false
        },
        "Hours": {
            "text": "Hours",
            "color": "#99CCFF",
            "show": true
        },
        "Minutes": {
            "text": "Minutes",
            "color": "#BBFFBB",
            "show": true
        },
        "Seconds": {
            "text": "Seconds",
            "color": "#FF9999",
            "show": true
        }
      }
    }
);
}
</script>